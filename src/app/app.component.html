<div class="App">
  <div class="App--header">
    <h1>Deep Space 9 - Character Dynamics</h1>
  </div>
  <div class="App--data">
    <form
      [formGroup]="form"
      class="App--form grid justify-center text-center text-white px-2"
    >
      <label class="">Choose Mode: </label>
      <div class="my-1 flex justify-center">
        <button class="text-center rounded-r-none w-20p">Season</button>
        <button class="text-center rounded-l-none w-20p">Episode</button>
      </div>
      <label class="">Choose a Season:</label>
      <div class="select-container flex my-1 justify-center">
        <select (change)="onSeasonSelect($event.target.value)">
          <option value="---">---</option>
          <option *ngFor="let number of seasons; index as i" [value]="i + 1">
            Season {{ i + 1 }}
          </option>
        </select>
      </div>
      <label class="">Choose an Episode:</label>
      <div class="select-container flex my-1 justify-center">
        <select
          [ngModelOptions]="{ standalone: true }"
          [ngModel]="dataService.season$ | async"
          (ngModelChange)="onEpisodeSelect($event)"
        >
          <option value="---">---</option>
          <option
            *ngFor="let episode of dataService.season$ | async"
            [ngValue]="episode"
          >
            {{ episode.episodeNum }}: {{ episode.title }}
          </option>
        </select>
      </div>
      <ng-container *ngIf="!_isEmpty(form.get('chars').value)">
        <label class="transition-all duration-200"> Choose Characters:</label>
        <div class="transition-all duration-200 grid grid-cols-4">
          <label
            class="button transition-all duration-200"
            formGroupName="chars"
            *ngFor="let char of form.get('chars').value | keyvalue"
            ><input
              type="checkbox"
              [formControlName]="char.key"
              [value]="char.value"
            />
            {{ char.key }}
          </label>
        </div>
      </ng-container>
      <label class="">Choose Relationships: </label>
      <div class="grid grid-cols-4 my-1">
        <label
          class="text-center button"
          formGroupName="dynamics"
          *ngFor="let dynamics of form.get('dynamics').value | keyvalue"
        >
          <input
            type="checkbox"
            [formControlName]="dynamics.key"
            [value]="dynamics.value"
          />
          {{ dynamics.key }}
        </label>
      </div>
      <button class="w-full" (click)="draw()">Draw</button>
    </form>
    <div class="App--graph rounded-b-lg">
      <app-graph></app-graph>
      <!-- <ngx-graph
          class="chart-container"
          [view]="[500, 200]"
          [links]="[
            {
              id: 'a',
              source: 'first',
              target: 'second',
              label: 'is parent of'
            },
            {
              id: 'b',
              source: 'first',
              target: 'third',
              label: 'custom label'
            }
          ]"
          [nodes]="[
            {
              id: 'first',
              label: 'A'
            },
            {
              id: 'second',
              label: 'B'
            },
            {
              id: 'third',
              label: 'C'
            }
          ]"
        >
        </ngx-graph> -->
    </div>
  </div>
</div>
